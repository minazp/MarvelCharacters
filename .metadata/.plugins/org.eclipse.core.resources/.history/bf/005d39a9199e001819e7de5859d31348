import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

import org.json.JSONArray;
import org.json.JSONObject;

public class GetMarvelCharacters {
 
	public void getCharacters() throws Exception {
		String url = "http://gateway.marvel.com/v1/public/characters?ts=1&apikey=518cc59dca9223c9c23c5a8a5d8ad2bf&hash=2a4f88f7a59d84debbfbc6547b864dd3";
		URL urlObj = new URL(url);
		HttpURLConnection con = (HttpURLConnection) urlObj.openConnection();
		// optional default is GET
		con.setRequestMethod("GET");
		//add request header
		con.setRequestProperty("User-Agent", "Mozilla/5.0");
		int responseCode = con.getResponseCode();
		System.out.println("\nSending 'GET' request to URL : " + url);
		System.out.println("Response Code : " + responseCode);
		BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));
		String inputLine;
		StringBuilder content = new StringBuilder();
		while ((inputLine = in.readLine()) != null) {
			content.append(inputLine);
		}
		in.close();
		
		JSONObject response = new JSONObject(content.toString());
		
		JSONObject data = response.getJSONObject("data");
		JSONArray results = data.getJSONArray("results");
		
		for (Object result : results) {
			JSONObject hero = new JSONObject(result.toString());
			System.out.println("ID: " + hero.getInt("id"));
		}
	}
	
}
